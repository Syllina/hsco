{-# LANGUAGE DataKinds, KindSignatures, TypeApplications, ScopedTypeVariables, AllowAmbiguousTypes #-}
module Hsco.Reco.Resonance (
    ResonanceType(..),
    Resonance(..)
) where

-- 共鸣块属性统计
-- 参考自灰机 wiki 及 nga  https://bbs.nga.cn/read.php?tid=37109986
--
-- 共鸣块名字
--      属性：(lvl) xx% -> (lvl) xx% -> ...
-- 增伤单格
--      生命：1%
--      创伤加成：0.5%
-- 减伤单格
--      生命：1%
--      受创减免：0.5%
-- 双格
--      暴击创伤：3% -> 4%
--      受创减免：1% -> 1%
-- 三格
--      攻击：1% -> 1% -> 1.5%
--      暴击率：1.5% -> 2% -> 2.5%
-- I 形
--      生命：2% -> 2.5% -> 3% -> 3.5%
--      攻击：1.5% -> 2.5% -> 3% -> 3.5%
--      精神防御：1.5% -> 2.5% -> 3% -> 3.5%
-- T 形
--      生命：2% -> 2.5% -> 3% -> 3.5%
--      攻击：1.5% -> 2.5% -> 3% -> 3.5%
--      现实防御：1.5% -> 2.5% -> 3% -> 3.5%
-- O 形
--      攻击：1.5% -> 2.5% -> 3% -> 3.5%
--      现实防御：1.5% -> 2.5% -> 3% -> 3.5%
--      精神防御：1.5% -> 2.5% -> 3% -> 3.5%
-- Z 形
--      抗暴率：3% -> 4% -> 5% -> 6%
--      暴击防御：3% -> 4% -> 5% -> 6%
--      受创减免：3% -> 4% -> 4.5% -> 5%
-- S 形
--      暴击率：1.5% -> 2% -> 2.5% -> 3%
--      抗暴率：1% -> 1.5% -> 2% -> 2%
--      创伤加成：2% -> 2.5% -> 3% -> 4%
-- J 形
--      暴击率：4% -> 5.5% -> 6% -> 7%
--      抗暴率：1% -> 1.5% -> 2% -> 2%
--      暴击创伤：2.5% -> 3% -> 3.5% -> 4%
-- L 形
--      暴击率：2.5% -> 3% -> 3.5% -> 4%
--      创伤加成：1.5% -> 2% -> 2.5% -> 3%
--      受创减免：1% -> 1.5% -> 2% -> 2.5%
--
-- 主模块的属性是按照洞三满级面板按百分比计算后向下取整得到的
-- 怀疑可能是按照那个隐藏数值？需要对所有角色进行验证，看看是否有不符合直接按面板算的情况存在（可以考虑分析低星角色对应的该值？）
-- 计算时假设了生命、现实防御与精神防御比例一直相等
-- 大十字 / 大 Z 形 / 大 T 形 的 生命 / 现防 / 精防都是一样的
-- 生命 / 现防 / 精防：1.4% -> 2.8% -> 5.6% -> 8.4% -> 11.2% -> 14.6% -> 17.9% -> 21.3% -> 24.6% -> 28.0%
-- 所有主模块的攻击都是一样的
-- 攻击：1.2% -> 2.3% -> 4.6% -> 6.9% -> 9.2% -> 12.0% -> 14.7% -> 17.5% -> 20.2% -> 23.0%
-- 所有主模块的这些子模块都是一样的
-- 类型：（共鸣等级）个数 * 等级
-- 增伤：(1)1*1 -> (2)2*1
-- 减伤：(1)1*1 -> (3)2*1
-- 双格：(1)1*1 -> (7)2*1 -> (12)3*2
-- 三格：(2)1*1 -> (4)2*1 -> (8)2*2 -> (9)3*2 -> (10)3*3 -> (11)4*3
-- I 形：(3)1*1 -> (5)1*2 -> (8)1*3 -> (9)2*3 -> (12)2*4
-- T 形：(3)1*1 -> (5)1*2 -> (8)1*3 -> (9)2*3 -> (12)2*4
-- O 形：(3)1*1 -> (5)1*2 -> (8)1*3 -> (9)2*3 -> (12)2*4
-- 这些子模块的顺序会随主模块变化，在下面称为“可变子模块”，按序给出
-- ? 形：(2)1*1 -> (4)2*1 -> (6)2*2 -> (8)3*2 -> (9)3*3 -> (10)4*3 -> (11)4*4
-- ? 形：(2)1*1 -> (6)1*2 -> (7)2*2 -> (10)2*3 -> (11)2*4
-- ? 形：(4)1*1 -> (7)1*2 -> (10)1*3 -> (13)1*4
-- ? 形：(5)1*1 -> (7)1*2 -> (10)1*3 -> (13)1*4
-- 大十字
--      暴击率：0 -> 4% -> 4% -> 5% -> 5% -> 6% -> 6% -> 7% -> 7% -> 8%
--      抗暴率：0 -> 0 -> 0 -> 0 -> 0 -> 2% -> 3% -> 3% -> 3% -> 4%
--      暴击创伤：0 -> 5% -> 5% -> 6% -> 7% -> 8% -> 10% -> 11% -> 13% -> 15%
--      受创减免：0 -> 0 -> 0 -> 0 -> 0 -> 0 -> 0 -> 1% -> 2% -> 3%
--      可变子模块：J L Z S
--
-- 大 T 形
--      抗暴率：0 -> 0 -> 2% -> 2% -> 2% -> 3% -> 4% -> 4% -> 4% -> 4%
--      暴击创伤：0 -> 0 -> 0 -> 0 -> 0 -> 0 -> 0 -> 4% -> 5% -> 6%
--      暴击防御：0 -> 0 -> 0 -> 3% -> 3% -> 3% -> 4% -> 4% -> 4% -> 5%
--      创伤加成：0 -> 3% -> 3% -> 4% -> 5% -> 5% -> 7% -> 8% -> 9% -> 10%
--      可变子模块：S L Z J
--
-- 大 Z 形
--      抗暴率：0 -> 0 -> 0 -> 6% -> 8% -> 10% -> 10% -> 10% -> 10% -> 10%
--      暴击创伤：0 -> 0 -> 0 -> 0 -> 0 -> 6% -> 9% -> 12% -> 15% -> 18%
--      创伤加成：0 -> 0 -> 1% -> 1% -> 2% -> 2% -> 3% -> 4% -> 4% -> 4%
--      受创减免：0 -> 3% -> 3% -> 4% -> 4% -> 5% -> 6% -> 7% -> 7% -> 8%
--      可变子模块：L S Z J
--
-- 大 U 形
--      生命：1.3% -> 2.5% -> 5.0% -> 7.5% -> 10.0% -> 13.0% -> 16.0% -> 19.0% -> 22.0% -> 25.0%
--      现防 / 精防：1.2% -> 2.4% -> 4.8% -> 7.2% -> 9.6% -> 12.5% -> 15.4% -> 18.2% -> 21.1%
--      暴击率：0 -> 0 -> 0 -> 0 -> 3% -> 3% -> 4% -> 5% -> 5% -> 6%
--      抗暴率：0 -> 6% -> 7% -> 8% -> 9% -> 10% -> 12% -> 13% -> 14% -> 16%
--      创伤加成：0 -> 0 -> 0 -> 1% -> 1% -> 2% -> 2% -> 3% -> 3% -> 4%
--      受创减免：0 -> 0 -> 1% -> 1% -> 2% -> 2% -> 2% -> 3% -> 4% -> 4%
--      可变子模块：Z L S J

data ResonanceType = X | T | Z | U -- X as 十

data Resonance (r :: ResonanceType) = Resonance {
    resLevel :: Int
    -- 以及共鸣的摆放信息
}

class IsResonanceType (t :: ResonanceType) where
    getConstraints :: ()
